<div class="row mt-2 row-cols-1 row-cols-md-3 g-4">

    {% for gym in gyms %}
    <div class="col">
        <div class="card border-0 shadow-sm h-100 rounded-4 overflow-hidden">

            <!-- صورة بدون قص -->
            <div class="bg-light d-flex justify-content-center align-items-center" style="height: 220px;">
                <img src="{{ gym.image.url }}" class="img-fluid" style="max-height: 100%; object-fit: contain;">
            </div>

            <div class="card-body d-flex flex-column gap-3">


                <div class="d-flex justify-content-between align-items-start w-100">

                    <!--  الجهة اليمنى تقييم + تعليقات + مدربين -->
                    <div class="d-flex flex-column gap-2 text-start">

                        <!-- متوسط التقييم -->
                        <div class="d-flex align-items-center gap-1">
                            <span class="small text-muted">متوسط التقييم:</span>
                            <i class="bi bi-star-fill" style="color: #f1c40f; font-size:18px;"></i>
                            <span class="fw-semibold">{{ gym.avg_rating|default:"0" }}</span>
                        </div>


                        <!-- عدد التعليقات -->
                        <div class="d-flex align-items-center gap-1">
                        <span class="small text-muted mt-2">عدد التعليقات:</span>
                            <span class="material-symbols-outlined" style="
                                      font-size:20px;
                                      background: var(--orange-grad);
                                      -webkit-background-clip: text;
                                      color: transparent;">
                                chat_bubble
                            </span>
                            <span class="fw-semibold">{{ gym.comments_count }}</span>
                        </div>

                        <!-- وجود مدربين -->
                        <span class="small text-muted mt-2">
                            {% if gym.has_coach %}
                            يوجد مدربين
                            {% else %}
                            بدون مدربين
                            {% endif %}
                        </span>

                    </div>


                    <!--  الجهة اليسرى الأحياء + اسم النادي + تفاصيل  -->
                    <div class="d-flex flex-column gap-2 text-end">

                        <!-- الأحياء -->
                        <div class="d-flex flex-wrap gap-2 justify-content-end">
                            {% for h in gym.hoods.all %}
                            <a href="{% url 'gyms:all_gyms_view' h.name %}">
                                <span class="badge text-white px-3 py-1"
                                    style="background: var(--orange-grad); border-radius: 30px;">
                                    {{ h.name }}
                                </span>
                            </a>
                            {% endfor %}
                        </div>

                        <!-- اسم النادي -->
                        <h4 class="fw-bold m-0" style="color: var(--text-dark);">
                            {{ gym.user.username }}
                        </h4>

                        <!-- عرض التفاصيل -->
                        <a href="{% url 'gyms:gym_detail_view' gym.id %}" class="text-decoration-none fw-semibold"
                            style="color: var(--orange-1);">
                            <span class="material-symbols-outlined align-middle" style="font-size:20px;"> arrow_back
                            </span>
                            عرض التفاصيل
                        </a>

                    </div>

                </div>

            </div>

        </div>
    </div>
    {% endfor %}

</div>